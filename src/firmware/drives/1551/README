This information applies to Commodore 1551 Disk Drive used with plus/4.

Diskettes created on the 1551 are read write compatible with Commodore
1540/1541, 4040, 2031 disk drives.  The 1551 is connected to the
computer through the "TCBM" interface.  This interface is specially
created by Commodore.  Bytes are transferred as parallel data with a
8-bit bi-directional port, two handshake lines, and two status lines.
This handshake protocol allows for less timing constraint than slower
serial interfaces.  Estimated data rate over the TCBM handshake is
1600 bytes per second versus 300-400 bytes per second for the 1541
drive.  The 1551 connector plugs into the host computer's expansion
port and allows external cartridges to be plugged in.  You can have
two 1551 drives, two 1541 drives, and two printers hooked up to the
computer at once as long as each peripheral is assigned a different
device number.  When there is a contention with duplicate device
numbers, the 1551 has priority over the 1541.

Memory map of the 1551:

Location	Purpose
$0000-0001	8 bit port - 6510T

	$00 : cpu data direction register 
	$01 : cpu port register

		bit 0: drive head stepper 0 (STP)
		bit 1: drive head stepper 1 (STP)
		bit 2: drive motor on/off (MTR)
		bit 3: drive LED (ACT)
		bit 4: write protect sensor (WPS)
		bit 5: density select #0 (DS0)
		bit 6: density select #1 (DS1)
		bit 7: byte latched (1 - yes, 0 - no)

$0002-00ff	Zero page work area, *job queue, variables
$0100-01ff	GCR overflow area and stack
$0200-02ff	Command buffer, parser, tables, variables
$0300-06ff	4 data buffers, 0-3
$0700-07ff	BAM resident in memory
$4000-4007	6523a I/O to computer controller
$c000-ffe5	16KB ROM, DOS and controller routines
$ffe6-ffff	JMP table, user command vectors
*job queue and HDRS offset by 2 bytes - starts at $0002


TIA 6523 - Triport Interface Adapter

The TIA6523 is a tri-port adapter. It has 28 pins,
three data direction and three port registers. It's
mapped in at $4000-$4007 in the 1551. Some drives actually
contain a 6525 with a 6523 pinout.

Address		6523 TIA ($4000-$4007)
-------------------------------------------------------------------------------
    0		Port A Data (data sent to the computer)
    1		Port B Data (connected to the shift register of the R/W head)
    2		Port C Data
			bit 7: DAV (DAta Valid)
				handshake from bit #6 from $FEF2/FEC2 of plus/4
			bit 6: SYNC
				0 -> SYNC found
				1 -> no SYNC
			bit 5: MODE (jumper)
				drive number (0 -> 8, 1 -> 9)
			bit 4: MODE (R/W head)
				0 -> head in write mode
				1 -> head in read mode
			bit 3: ACK (ACKnowledge)
				handshake to bit #7 of $FEF2/$FEC2 
			bit 2: DEV
				1 -> drive mapped at $FEF0 on plus/4
				0 -> drive mapped at $FEC0 on plus/4
			bit 1: STATUS1 - mapped at $FEF1/FEC1 on plus/4
			bit 0: STATUS0 - mapped at $FEF1/FEC1 on plus/4
					  01 Timeout during reading
					  10 Timeout during writing
					  11 End of data
   Data direction registers (	1 -> bit out, 0 -> bit in)

   3		Port A Direction
   4		Port B Direction 
   5		Port C Direction (set to $1F by the drive ROM)
   6		N/A
   7		N/A


User commands:

User command	Function
u1 or ua	Block read replacement
u2 or ub	Block write replacement
u3 or uc	Jump to $0500
u4 or ud	Jump to $0503
u5 or ue	Jump to $0506
u6 or uf	Jump to $0509
u7 or ug	Jump to $050c
u8 or uh	Jump to $050f
u9 or ui	Jump to ($fffa) reset tables
u: or uj	Power up vector

The u1 and u2 commands are used to replace the Block-Read and
Block-Write commands, ui restarts the 1551 without changing variables,
uj cold-starts the 1551 almost as if it had been turned off and on
again.

Specifications of the 1551 disk drive:

Storage:
Total formatted capacity	174848 bytes per diskette
Maximum sequential file size	168656 bytes per diskette
Maximum relative file size	167132 bytes per diskette
Records per file		65535
Files per diskette		144
Tracks per diskette		35
Sectors per track		17-21
Sectors per diskette		683 total
Sectors per diskette		664 free for data
Bytes per sector		256

Integrated circuit chips used:
6510T		Microprocessor, I/O
6523A		I/O
23128		16KB ROM
4016		2KB RAM
Gate array	Controller circuit

Physical dimensions:
Height		97 mm
Width		200 mm
Depth		374 mm
Weight		10.5 kg

Electrical requirements:
Voltage US	100-120 VAC
Voltage export	220-240 VAC
Freq US		60 Hz
Freq export	50 Hz
Power used	25 Watts

Media:
5 1/4 inch diskette

This information was rewritten by Jan Sefcik from the Commodore 1551
Disk Drive User's Manual.  The memory map and the description of the
TIA were provided by Attila Grósz in 2003.  Edited by Marko Mäkelä.
